{"version":3,"sources":["webpack:///./src/common/source/helpers.js"],"names":["debounce","sg","SelectorGenerator","genAction","e","opts","target","srcElement","tagName","toLowerCase","timeStamp","Date","url","window","location","href","title","id","getAttribute","className","selector","getSelector","innerText","value","event","type","_options","getFootprint","actionPaths","initDeviceInfo","generator","Gen","navigator","userAgent","forEach","action","reload","goto","add","dest","fn","delay","timer","context","args","arguments","clearTimeout","setTimeout","apply","collectDeviceInfo","screen","ismobile","devicePixelRatio","orientation","mozOrientation","msOrientation","deviceWidth","innerWidth","width","deviceHeight","innerHeight","height","isMobileDevice","phone","tablet","isMobile"],"mappings":";;;;;;;;;;;;;;;;QA2CgBA,Q,GAAAA,Q;;AA3ChB;;AAGA;;AAGA;;;;AACA;;;;AACA;;;;;;AACA,IAAMC,KAAK,IAAIC,8BAAJ,EAAX;AACA;;;;AAIO,IAAMC,gCAAY,SAAZA,SAAY,CAAUC,CAAV,EAAaC,IAAb,EAAmB;AACxC,QAAIC,SAASF,EAAEE,MAAf;AAAA,QACIC,aAAaH,EAAEG,UADnB;AAAA,QAEIC,UAAUD,WAAWC,OAAX,IAAsBD,WAAWC,OAAX,CAAmBC,WAAnB,EAAtB,IAA0D,EAFxE;AAAA,QAGIC,YAAY,CAAC,IAAIC,IAAJ,EAHjB;AAIA,WAAO;AACHD,4BADG;AAEHE,aAAKC,OAAOC,QAAP,CAAgBC,IAFlB;AAGHC,eAAOV,OAAOU,KAHX;AAIHC,YAAIV,WAAWW,YAAX,CAAwB,MAAxB,CAJD;AAKHC,mBAAWZ,WAAWW,YAAX,CAAwB,SAAxB,CALR;AAMHE,kBAAUnB,GAAGoB,WAAH,CAAed,UAAf,CANP;AAOHC,wBAPG;AAQHc,mBAAWhB,OAAOgB,SAAP,IAAoBhB,OAAOiB,KARnC;AASHC,eAAOpB,EAAEqB,IATN;AAUHnB,gBAAQC,UAVL;AAWHmB,kBAAUrB;AAXP,KAAP;AAaH,CAlBM;;AAoBA,IAAMsB,sCAAe,SAAfA,YAAe,CAACC,WAAD,EAAcC,cAAd,EAA+B;AACvD,QAAIC,YAAY,IAAIC,QAAJ,CAAQH,YAAY,CAAZ,EAAehB,GAAvB,EAA4BoB,UAAUC,SAAtC,EAAiDJ,cAAjD,CAAhB;AACAD,gBAAYM,OAAZ,CAAoB,UAACC,MAAD,EAAY;AAC5BA,eAAOC,MAAP,GAAgBN,UAAUO,IAAV,CAAeF,OAAOvB,GAAtB,CAAhB,GAA6CkB,UAAUQ,GAAV,CAAcH,MAAd,CAA7C;AACH,KAFD;;AAIA,WAAOL,UAAUS,IAAV,EAAP;AACH,CAPM;;AASA,SAASvC,QAAT,CAAkBwC,EAAlB,EAAsBC,KAAtB,EAA6B;AAChC;AACA,QAAIC,cAAJ;;AAEA;AACA,WAAO,YAAY;AACf;AACA,YAAIC,UAAU,IAAd;AACA,YAAIC,OAAOC,SAAX;;AAEA;AACAC,qBAAaJ,KAAb;;AAEA;AACA;AACAA,gBAAQK,WAAW,YAAY;AAC3BP,eAAGQ,KAAH,CAASL,OAAT,EAAkBC,IAAlB;AACH,SAFO,EAELH,KAFK,CAAR;AAGH,KAbD;AAcH;;AAEM,IAAIQ,gDAAoB,SAApBA,iBAAoB,CAAUhB,SAAV,EAAqBpB,MAArB,EAA6BqC,MAA7B,EAAqC;AAChE,QAAIC,WAAW,wBAASlB,SAAT,CAAf;AACA,WAAO;AACHmB,0BAAkBvC,OAAOuC,gBADtB;AAEHC,qBAAaH,OAAOG,WAAP,IAAsBH,OAAOI,cAA7B,IAA+CJ,OAAOK,aAFhE;AAGHC,qBAAc3C,OAAO4C,UAAP,GAAoB,CAArB,GAA0B5C,OAAO4C,UAAjC,GAA8CP,OAAOQ,KAH/D;AAIHC,sBAAe9C,OAAO+C,WAAP,GAAqB,CAAtB,GAA2B/C,OAAO+C,WAAlC,GAAgDV,OAAOW,MAJlE;AAKHC,wBAAgBX,SAASY,KAAT,IAAkBZ,SAASa,MALxC;AAMHC,kBAAUd;AANP,KAAP;AAQH,CAVM,C","file":"count.92fb173aadbc9b000228.hot-update.js","sourcesContent":["import {\r\n    getSelector\r\n} from './util'\r\nimport {\r\n    Gen\r\n} from './gen.js'\r\nimport isMobile from './isMobile';\r\nimport uniqueSelector from 'unique-selector'\r\nimport SelectorGenerator from 'css-selector-generator'\r\nconst sg = new SelectorGenerator();\r\n/**\r\n * delegate function, when event is triggled, record it.\r\n * @param {*} e \r\n */\r\nexport const genAction = function (e, opts) {\r\n    var target = e.target,\r\n        srcElement = e.srcElement,\r\n        tagName = srcElement.tagName && srcElement.tagName.toLowerCase() || '',\r\n        timeStamp = +new Date();\r\n    return {\r\n        timeStamp,\r\n        url: window.location.href,\r\n        title: target.title,\r\n        id: srcElement.getAttribute('_id_'),\r\n        className: srcElement.getAttribute('_class_'),\r\n        selector: sg.getSelector(srcElement),\r\n        tagName,\r\n        innerText: target.innerText || target.value,\r\n        event: e.type,\r\n        target: srcElement,\r\n        _options: opts\r\n    }\r\n};\r\n\r\nexport const getFootprint = (actionPaths, initDeviceInfo)=>{\r\n    let generator = new Gen(actionPaths[0].url, navigator.userAgent, initDeviceInfo);\r\n    actionPaths.forEach((action) => {\r\n        action.reload ? generator.goto(action.url) : generator.add(action);\r\n    });\r\n\r\n    return generator.dest();\r\n}\r\n\r\nexport function debounce(fn, delay) {\r\n    // 定时器，用来 setTimeout\r\n    let timer;\r\n\r\n    // 返回一个函数，这个函数会在一个时间区间结束后的 delay 毫秒时执行 fn 函数\r\n    return function () {\r\n        // 保存函数调用时的上下文和参数，传递给 fn\r\n        let context = this;\r\n        let args = arguments;\r\n\r\n        // 每次这个返回的函数被调用，就清除定时器，以保证不执行 fn\r\n        clearTimeout(timer);\r\n\r\n        // 当返回的函数被最后一次调用后（也就是用户停止了某个连续的操作），\r\n        // 再过 delay 毫秒就执行 fn\r\n        timer = setTimeout(function () {\r\n            fn.apply(context, args);\r\n        }, delay);\r\n    };\r\n}\r\n\r\nexport let collectDeviceInfo = function (userAgent, window, screen) {\r\n    let ismobile = isMobile(userAgent);\r\n    return {\r\n        devicePixelRatio: window.devicePixelRatio,\r\n        orientation: screen.orientation || screen.mozOrientation || screen.msOrientation,\r\n        deviceWidth: (window.innerWidth > 0) ? window.innerWidth : screen.width,\r\n        deviceHeight: (window.innerHeight > 0) ? window.innerHeight : screen.height,\r\n        isMobileDevice: ismobile.phone || ismobile.tablet,\r\n        isMobile: ismobile\r\n    }\r\n}"],"sourceRoot":""}